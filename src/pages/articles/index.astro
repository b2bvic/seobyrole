---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('articles');
const sortedArticles = articles.sort((a, b) =>
  (b.data.date || '').localeCompare(a.data.date || '')
);
---

<Base title="All Articles" description="SEO guides tailored by role. Product managers, developers, CMOs, founders, and content teams.">
  <section class="mx-auto max-w-5xl px-6 py-20">
    <h1 class="text-3xl font-bold text-primary-900">All Articles</h1>
    <p class="mt-4 text-primary-600 max-w-2xl">
      Role-specific SEO education. Find what applies to your job.
    </p>

    <div class="mt-12 space-y-4">
      {sortedArticles.map(article => (
        <a
          href={`/articles/${article.slug}`}
          class="group block p-6 border border-primary-100 rounded-lg hover:border-accent-400 hover:shadow-sm transition-all"
        >
          <h2 class="font-semibold text-primary-900 group-hover:text-accent-600 transition-colors">
            {article.data.title}
          </h2>
          <p class="mt-2 text-sm text-primary-500 line-clamp-2">{article.data.description}</p>
          <div class="mt-3 flex items-center gap-4 text-xs text-primary-400">
            {article.data.date && <span>{article.data.date}</span>}
            {article.data.type && <span class="capitalize">{article.data.type}</span>}
          </div>
        </a>
      ))}
    </div>
  </section>
</Base>
