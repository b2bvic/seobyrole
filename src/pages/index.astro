---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('articles');
const sortedArticles = articles.sort((a, b) =>
  (b.data.date || '').localeCompare(a.data.date || '')
);

const roles = [
  { title: 'Product Managers', desc: 'Build the business case. Get dev buy-in. Ship SEO work.', slug: 'seo-for-product-managers' },
  { title: 'Developers', desc: 'Technical implementation without the marketing fluff.', slug: 'technical-seo-for-developers' },
  { title: 'CMOs & Executives', desc: 'Budget modeling, ROI projections, vendor management.', slug: 'seo-for-cmos-managing-seo-spend' },
  { title: 'Founders', desc: 'SEO vs. paid acquisition. When to hire. What to own.', slug: 'seo-for-founders-seo-vs-paid' },
  { title: 'Content Teams', desc: 'Keyword research that doesn\'t kill creativity.', slug: 'seo-for-content-teams-keyword-research' },
  { title: 'Marketing Managers', desc: 'Channel integration without losing your mind.', slug: 'seo-for-marketing-managers-channel-integration' },
];
---

<Base title="SEO Education for Your Actual Job">
  <section class="mx-auto max-w-5xl px-6 pt-20 pb-16">
    <h1 class="text-4xl md:text-5xl font-bold text-primary-900 leading-tight max-w-3xl">
      Stop reading generic SEO advice.
    </h1>
    <p class="mt-6 text-xl text-primary-600 max-w-2xl">
      SEO education tailored to your role. What a PM needs is different from what a developer needs. Find your path.
    </p>
  </section>

  <section class="mx-auto max-w-5xl px-6 pb-20">
    <h2 class="text-sm font-semibold text-primary-400 uppercase tracking-wide mb-8">Choose Your Role</h2>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
      {roles.map(role => (
        <a
          href={`/articles/${role.slug}`}
          class="group block p-6 border border-primary-100 rounded-lg hover:border-accent-400 hover:shadow-sm transition-all"
        >
          <h3 class="font-semibold text-primary-900 group-hover:text-accent-600 transition-colors">{role.title}</h3>
          <p class="mt-2 text-sm text-primary-500">{role.desc}</p>
        </a>
      ))}
    </div>
  </section>

  <section class="bg-primary-50/50 py-20">
    <div class="mx-auto max-w-5xl px-6">
      <h2 class="text-sm font-semibold text-primary-400 uppercase tracking-wide mb-8">Latest Articles</h2>
      <div class="space-y-6">
        {sortedArticles.slice(0, 5).map(article => (
          <a
            href={`/articles/${article.slug}`}
            class="group block"
          >
            <article class="flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-8 py-4 border-b border-primary-100">
              <h3 class="font-medium text-primary-900 group-hover:text-accent-600 transition-colors">
                {article.data.title}
              </h3>
              <span class="text-sm text-primary-400 shrink-0">{article.data.date}</span>
            </article>
          </a>
        ))}
      </div>
      <a
        href="/articles"
        class="inline-block mt-8 text-sm font-medium text-accent-600 hover:text-accent-700 transition-colors"
      >
        View all articles &rarr;
      </a>
    </div>
  </section>
</Base>
